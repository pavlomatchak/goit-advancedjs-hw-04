{"version":3,"file":"commonHelpers.js","sources":["../src/js/api.js","../src/js/append-images.js","../src/js/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_KEY = '44429769-5cdd23654e6c944851dfe4e78';\n\nexport function fetchImages(query, page) {\n  axios.defaults.headers = ['Access-Control-Allow-Origin'];\n\n  return axios({\n    method: 'get',\n    url: `https://pixabay.com/api/?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&per_page=40&page=${page}`,\n    responseType: 'json',\n  });\n}\n","export function appendImages(images) {\n  const gallery = document.querySelector('.gallery');\n  let content = '';\n\n  images.forEach(image => {\n    content += `\n      <div class=\"photo-card\">\n        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n        <div class=\"info\">\n          <p class=\"info-item\">\n            <b>Likes</b>\n            ${image.likes}\n          </p>\n          <p class=\"info-item\">\n            <b>Views</b>\n            ${image.views}\n          </p>\n          <p class=\"info-item\">\n            <b>Comments</b>\n            ${image.comments}\n          </p>\n          <p class=\"info-item\">\n            <b>Downloads</b>\n            ${image.downloads}\n          </p>\n        </div>\n      </div>\n    `;\n  });\n\n  gallery.insertAdjacentHTML('beforeend', content);\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { fetchImages } from './api';\nimport { appendImages } from './append-images';\n\nconst gallery = document.querySelector('.gallery');\nconst form = document.getElementById('search-form');\nconst loadMore = document.querySelector('.load-more');\nlet page = 1;\nlet totalPages = 0;\nlet query = '';\n\nasync function fetchData() {\n  const { data } = await fetchImages(query, page)\n  totalPages = Math.ceil(data.totalHits / 40);\n\n  if (data.totalHits === 0) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Sorry, there are no images matching your search query. Please try again.',\n      position: 'topRight',\n      timeout: 5000,\n    });\n\n    return;\n  }\n\n  if (totalPages > 1) {\n    loadMore.style.display = 'block';\n  }\n\n  appendImages(data.hits);\n\n  if (totalPages > 1 && page === totalPages) {\n    loadMore.style.display = 'none';\n    iziToast.error({\n      title: 'Error',\n      message: '\"We\\'re sorry, but you\\'ve reached the end of search results.\"',\n      position: 'topRight',\n      timeout: 5000,\n    });\n  }\n}\n\nform.addEventListener('submit', e => {\n  e.preventDefault();\n  gallery.innerHTML = '';\n  query = form.elements.searchQuery?.value.trim();\n  page = 1;\n  loadMore.style.display = 'none';\n\n  if (query.length === 0) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Search field is empty',\n      position: 'topRight',\n      timeout: 5000,\n    });\n\n    return;\n  }\n\n  fetchData();\n});\n\nloadMore?.addEventListener('click', () => {\n  if (page < totalPages) {\n    page += 1;\n    fetchData();\n  }\n});\n"],"names":["API_KEY","fetchImages","query","page","axios","appendImages","images","gallery","content","image","form","loadMore","totalPages","fetchData","data","iziToast","e","_a"],"mappings":"6vBAEA,MAAMA,EAAU,qCAET,SAASC,EAAYC,EAAOC,EAAM,CACvC,OAAAC,EAAM,SAAS,QAAU,CAAC,6BAA6B,EAEhDA,EAAM,CACX,OAAQ,MACR,IAAK,gCAAgCJ,CAAO,MAAME,CAAK,6EAA6EC,CAAI,GACxI,aAAc,MAClB,CAAG,CACH,CCZO,SAASE,EAAaC,EAAQ,CACnC,MAAMC,EAAU,SAAS,cAAc,UAAU,EACjD,IAAIC,EAAU,GAEdF,EAAO,QAAQG,GAAS,CACtBD,GAAW;AAAA;AAAA,oBAEKC,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA,cAI5CA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,cAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,cAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,cAIdA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,KAK7B,CAAG,EAEDF,EAAQ,mBAAmB,YAAaC,CAAO,CACjD,CC1BA,MAAMD,EAAU,SAAS,cAAc,UAAU,EAC3CG,EAAO,SAAS,eAAe,aAAa,EAC5CC,EAAW,SAAS,cAAc,YAAY,EACpD,IAAIR,EAAO,EACPS,EAAa,EACbV,EAAQ,GAEZ,eAAeW,GAAY,CACzB,KAAM,CAAE,KAAAC,CAAM,EAAG,MAAMb,EAAYC,EAAOC,CAAI,EAG9C,GAFAS,EAAa,KAAK,KAAKE,EAAK,UAAY,EAAE,EAEtCA,EAAK,YAAc,EAAG,CACxBC,EAAS,MAAM,CACb,MAAO,QACP,QAAS,2EACT,SAAU,WACV,QAAS,GACf,CAAK,EAED,MACD,CAEGH,EAAa,IACfD,EAAS,MAAM,QAAU,SAG3BN,EAAaS,EAAK,IAAI,EAElBF,EAAa,GAAKT,IAASS,IAC7BD,EAAS,MAAM,QAAU,OACzBI,EAAS,MAAM,CACb,MAAO,QACP,QAAS,+DACT,SAAU,WACV,QAAS,GACf,CAAK,EAEL,CAEAL,EAAK,iBAAiB,SAAUM,GAAK,OAOnC,GANAA,EAAE,eAAc,EAChBT,EAAQ,UAAY,GACpBL,GAAQe,EAAAP,EAAK,SAAS,cAAd,YAAAO,EAA2B,MAAM,OACzCd,EAAO,EACPQ,EAAS,MAAM,QAAU,OAErBT,EAAM,SAAW,EAAG,CACtBa,EAAS,MAAM,CACb,MAAO,QACP,QAAS,wBACT,SAAU,WACV,QAAS,GACf,CAAK,EAED,MACD,CAEDF,GACF,CAAC,EAEDF,GAAA,MAAAA,EAAU,iBAAiB,QAAS,IAAM,CACpCR,EAAOS,IACTT,GAAQ,EACRU,IAEJ"}