{"version":3,"file":"commonHelpers.js","sources":["../src/js/api.js","../src/js/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_KEY = '44429769-5cdd23654e6c944851dfe4e78';\n\nexport function fetchImages(query, page) {\n  axios.defaults.headers = ['Access-Control-Allow-Origin'];\n\n  return axios({\n    method: 'get',\n    url: `https://pixabay.com/api/?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&per_page=40&page=${page}`,\n    responseType: 'json',\n  });\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { fetchImages } from './api';\n\nconst gallery = document.querySelector('.gallery');\nconst form = document.getElementById('search-form');\nconst loadMore = document.querySelector('.load-more');\nlet page = 1;\nlet totalPages = 0;\nlet query = '';\nlet images = '';\n\nfunction onSubmit() {\n  fetchImages(query, page)\n  .then(({ data }) => {\n    totalPages = Math.ceil(data.totalHits / 40);\n\n    if (data.totalHits === 0) {\n      iziToast.error({\n        title: 'Error',\n        message: 'Sorry, there are no images matching your search query. Please try again.',\n        position: 'topRight',\n        timeout: 15000,\n      });\n\n      return;\n    }\n\n    if (totalPages > 1) {\n      loadMore.style.display = 'block';\n    }\n\n    for (const item of data.hits) {\n      images += `\n        <div class=\"photo-card\">\n          <img src=\"${item.webformatURL}\" alt=\"${item.tags}\" loading=\"lazy\" />\n          <div class=\"info\">\n            <p class=\"info-item\">\n              <b>Likes</b>\n              ${item.likes}\n            </p>\n            <p class=\"info-item\">\n              <b>Views</b>\n              ${item.views}\n            </p>\n            <p class=\"info-item\">\n              <b>Comments</b>\n              ${item.comments}\n            </p>\n            <p class=\"info-item\">\n              <b>Downloads</b>\n              ${item.downloads}\n            </p>\n          </div>\n        </div>\n      `;\n    }\n\n    gallery.innerHTML = images;\n\n    if (page === totalPages) {\n      loadMore.style.display = 'none';\n      iziToast.error({\n        title: 'Error',\n        message: '\"We\\'re sorry, but you\\'ve reached the end of search results.\"',\n        position: 'topRight',\n        timeout: 15000,\n      });\n    }\n  })\n  .catch(() => {\n    iziToast.error({\n      title: 'Error',\n      message: 'Something went wrong',\n      position: 'topRight',\n      timeout: 15000,\n    });\n  });\n}\n\nform.addEventListener('submit', e => {\n  e.preventDefault();\n  gallery.innerHTML = '';\n  images = '';\n  query = form.elements.searchQuery?.value;\n  page = 1;\n  loadMore.style.display = 'none';\n\n  if (query.length === 0) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Search field is empty',\n      position: 'topRight',\n      timeout: 15000,\n    });\n\n    return;\n  }\n\n  onSubmit();\n});\n\nloadMore?.addEventListener('click', () => {\n  if (page < totalPages) {\n    page += 1;\n    onSubmit();\n  }\n});\n"],"names":["API_KEY","fetchImages","query","page","axios","gallery","form","loadMore","totalPages","images","onSubmit","data","iziToast","item","e","_a"],"mappings":"6vBAEA,MAAMA,EAAU,qCAET,SAASC,EAAYC,EAAOC,EAAM,CACvC,OAAAC,EAAM,SAAS,QAAU,CAAC,6BAA6B,EAEhDA,EAAM,CACX,OAAQ,MACR,IAAK,gCAAgCJ,CAAO,MAAME,CAAK,6EAA6EC,CAAI,GACxI,aAAc,MAClB,CAAG,CACH,CCRA,MAAME,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAO,SAAS,eAAe,aAAa,EAC5CC,EAAW,SAAS,cAAc,YAAY,EACpD,IAAIJ,EAAO,EACPK,EAAa,EACbN,EAAQ,GACRO,EAAS,GAEb,SAASC,GAAW,CAClBT,EAAYC,EAAOC,CAAI,EACtB,KAAK,CAAC,CAAE,KAAAQ,KAAW,CAGlB,GAFAH,EAAa,KAAK,KAAKG,EAAK,UAAY,EAAE,EAEtCA,EAAK,YAAc,EAAG,CACxBC,EAAS,MAAM,CACb,MAAO,QACP,QAAS,2EACT,SAAU,WACV,QAAS,IACjB,CAAO,EAED,MACD,CAEGJ,EAAa,IACfD,EAAS,MAAM,QAAU,SAG3B,UAAWM,KAAQF,EAAK,KACtBF,GAAU;AAAA;AAAA,sBAEMI,EAAK,YAAY,UAAUA,EAAK,IAAI;AAAA;AAAA;AAAA;AAAA,gBAI1CA,EAAK,KAAK;AAAA;AAAA;AAAA;AAAA,gBAIVA,EAAK,KAAK;AAAA;AAAA;AAAA;AAAA,gBAIVA,EAAK,QAAQ;AAAA;AAAA;AAAA;AAAA,gBAIbA,EAAK,SAAS;AAAA;AAAA;AAAA;AAAA,QAO1BR,EAAQ,UAAYI,EAEhBN,IAASK,IACXD,EAAS,MAAM,QAAU,OACzBK,EAAS,MAAM,CACb,MAAO,QACP,QAAS,+DACT,SAAU,WACV,QAAS,IACjB,CAAO,EAEP,CAAG,EACA,MAAM,IAAM,CACXA,EAAS,MAAM,CACb,MAAO,QACP,QAAS,uBACT,SAAU,WACV,QAAS,IACf,CAAK,CACL,CAAG,CACH,CAEAN,EAAK,iBAAiB,SAAUQ,GAAK,OAQnC,GAPAA,EAAE,eAAc,EAChBT,EAAQ,UAAY,GACpBI,EAAS,GACTP,GAAQa,EAAAT,EAAK,SAAS,cAAd,YAAAS,EAA2B,MACnCZ,EAAO,EACPI,EAAS,MAAM,QAAU,OAErBL,EAAM,SAAW,EAAG,CACtBU,EAAS,MAAM,CACb,MAAO,QACP,QAAS,wBACT,SAAU,WACV,QAAS,IACf,CAAK,EAED,MACD,CAEDF,GACF,CAAC,EAEDH,GAAA,MAAAA,EAAU,iBAAiB,QAAS,IAAM,CACpCJ,EAAOK,IACTL,GAAQ,EACRO,IAEJ"}